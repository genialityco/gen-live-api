{{!--
  Event email wrapper template.
  Variables (API fija):
    - org.branding.logoUrl (string | null)
    - org.branding.header.enabled (boolean)
    - org.branding.header.backgroundImageUrl (string | null)
    - org.branding.footer.enabled (boolean)
    - org.branding.footer.backgroundImageUrl (string | null)
    - org.branding.colors.primary (string | null)
    - org.name (string)
    - event.title (string)
    - event.branding.header.enabled (boolean)
    - event.branding.header.backgroundImageUrl (string | null)
    - event.branding.footer.enabled (boolean)
    - event.branding.footer.backgroundImageUrl (string | null)
    - event.branding.coverImageUrl (string | null)
    - event.branding.colors.primary (string | null)
    - content (pre-compiled HTML from admin-edited template)

  Header logic: event header > org header > event cover image (fallbacks)
  Footer logic: event footer > org footer (fallback)
  Colors: event primary > org primary > #4263eb (fallback)

  SECURITY NOTE: {{{content}}} renders unescaped HTML.
  This is acceptable because only organization admins can edit email templates.
--}}
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>{{event.title}}</title>
</head>
<body style="margin: 0; padding: 0; font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; background-color: #f5f5f7;">
  <table width="100%" cellspacing="0" cellpadding="0" style="background-color: #f5f5f7;">
    <tr>
      <td align="center" style="padding: 24px 16px 40px;">
        <table width="600" cellspacing="0" cellpadding="0" style="background-color: #ffffff; border-radius: 12px; box-shadow: 0 6px 18px rgba(15, 23, 42, 0.08); overflow: hidden;">

          {{!-- HEADER: event header > org header > event cover image --}}
          {{#if event.branding.header.backgroundImageUrl}}
          <tr>
            <td align="center" style="padding: 0;">
              <img src="{{event.branding.header.backgroundImageUrl}}" alt="{{event.title}}" style="width: 100%; max-width: 600px; display: block; height: auto;" />
            </td>
          </tr>
          {{else}}
            {{#if org.branding.header.backgroundImageUrl}}
          <tr>
            <td align="center" style="padding: 0;">
              <img src="{{org.branding.header.backgroundImageUrl}}" alt="{{org.name}}" style="width: 100%; max-width: 600px; display: block; height: auto;" />
            </td>
          </tr>
            {{else}}
              {{#if event.branding.coverImageUrl}}
          <tr>
            <td align="center" style="padding: 0;">
              <img src="{{event.branding.coverImageUrl}}" alt="{{event.title}}" style="width: 100%; max-width: 600px; display: block; height: auto;" />
            </td>
          </tr>
              {{/if}}
            {{/if}}
          {{/if}}

          {{!-- LOGO --}}
          {{#if org.branding.logoUrl}}
          <tr>
            <td align="center" style="padding: 20px 20px 0;">
              <img src="{{org.branding.logoUrl}}" alt="{{org.name}}" style="max-height: 60px; max-width: 200px;" />
            </td>
          </tr>
          {{/if}}

          {{!-- CONTENT --}}
          <tr>
            <td style="padding: 24px 20px;">
              {{{content}}}
            </td>
          </tr>

          {{!-- FOOTER IMAGE: event footer > org footer --}}
          {{#if event.branding.footer.backgroundImageUrl}}
          <tr>
            <td align="center" style="padding: 0;">
              <img src="{{event.branding.footer.backgroundImageUrl}}" alt="" style="width: 100%; max-width: 600px; display: block; height: auto;" />
            </td>
          </tr>
          {{else}}
            {{#if org.branding.footer.backgroundImageUrl}}
          <tr>
            <td align="center" style="padding: 0;">
              <img src="{{org.branding.footer.backgroundImageUrl}}" alt="" style="width: 100%; max-width: 600px; display: block; height: auto;" />
            </td>
          </tr>
            {{/if}}
          {{/if}}

          {{!-- FOOTER TEXT --}}
          <tr>
            <td style="padding: 16px 20px 24px;">
              <div style="height: 1px; background: linear-gradient(to right, rgba(148, 163, 184, 0), rgba(148, 163, 184, 0.8), rgba(148, 163, 184, 0)); margin: 0 0 16px;"></div>
              <p style="font-size: 11px; color: #9ca3af; margin: 0; text-align: center;">
                Este mensaje fue enviado autom√°ticamente por {{org.name}}. Por favor no respondas a este correo.
              </p>
            </td>
          </tr>
        </table>
      </td>
    </tr>
  </table>
</body>
</html>
